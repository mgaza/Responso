/*
 * => Responso.js Library version 1.0.0
 * => New Tags Introduced to HTML elements (d,r-class,r-id,r-get)
 * => Created By: Mohammed J. AbuIriban (fb.com/skeptic2013)(@MohammedIriban)
 * => 4th Augest, 2015
 */
function Target(e,t,s){this.name=e,this.width=t,this.type=s,this.style=document.createElement("style"),this.style.setAttribute("type","text/CSS"),this.style.setAttribute("media","screen and ("+s+"-width: "+t+"px)"),this.style.id=e+t+s,document.getElementsByTagName("head")[0].appendChild(this.style),this.invokeStyle=function(e){this.style.innerHTML+=e},this.update=function(e,t,s){style=document.getElementById(this.name+this.width+this.type),style.setAttribute("media","screen and ("+s+"-width: "+t+"px)"),this.style.id=e+t+s,this.name=e,this.width=t,this.type=s},this.getName=function(){return this.name},this.getWidth=function(){return this.width},this.getType=function(){return this.type},this.setName=function(e){this.name=e},this.setWidth=function(e){this.update(this.name,e,this.type)},this.setType=function(e){this.update(this.name,this.width,e)}}function Dimension(e){this.desktop=[],this.tablet=[],this.mobile=[],this.d=e.trim(),ds=this.d.split(" "),2==ds.length?(this.desktop.push(ds[0]),this.desktop.push(ds[1]),this.tablet.push(ds[0]),this.tablet.push(ds[1]),this.mobile.push(ds[0]),this.mobile.push(ds[1])):4==ds.length?(this.desktop.push(ds[0]),this.desktop.push(ds[1]),this.tablet.push(ds[2]),this.tablet.push(ds[3]),this.mobile.push(ds[2]),this.mobile.push(ds[3])):(this.desktop.push(ds[0]),this.desktop.push(ds[1]),this.tablet.push(ds[2]),this.tablet.push(ds[3]),this.mobile.push(ds[4]),this.mobile.push(ds[5])),this.invokeStyle=function(e,t,s){for(p=0,n=D_Storge.length;p<n;p++)if(-1!=D_Storge[p].d.indexOf(this.d))return D_Storge[p].name;return count=D_Storge.length,className="ResponsDim_"+count,dstyle="."+className+"{width:"+this.desktop[0]+";height:"+this.desktop[1]+";}",tstyle="."+className+"{width:"+this.tablet[0]+";height:"+this.tablet[1]+";}",mstyle="."+className+"{width:"+this.mobile[0]+";height:"+this.mobile[1]+";}",e.invokeStyle(dstyle),t.invokeStyle(tstyle),s.invokeStyle(mstyle),D_Storge.push(new ResponsDimensionClass(className,this.d)),className}}function ResponsDimensionClass(e,t){this.name=e,this.d=t}function setResponsoId(e,t){this.classes=null==e.getAttribute("class")?"":e.getAttribute("class"),this.idName=t,responso_id.push(new IdResponsClasses(this.idName,this.classes))}function getResponsoId(e,t){for(classes="",i=0,n=responso_id.length;i<n;i++)-1!=responso_id[i].id.search(t)&&responso_id[i].id.length==t.length&&(classes+=responso_id[i].classes);oldClasses=null==e.getAttribute("class")?"":e.getAttribute("class"),classes+=oldClasses,classes=classes.trim(),e.setAttribute("class",classes)}function IdResponsClasses(e,t){this.id=e,this.classes=t}function TClass_Builder(e,t,s){for(this.r_class=t.trim(),this.r_classes=this.r_class.split(" "),this.old_classes=[],this.new_classes=[],this.target_index=[],more_classes=!0,count=0;more_classes;){for(this.old_classes=[],this.target_index=[],more_classes=!1,i=0,n=this.r_classes.length;i<n;i++)this.r_classes[i].split("-").length>count&&(this.old_classes.push(this.r_classes[i].split("-")[count]),this.target_index.push(i),more_classes=!0);0!=this.old_classes.length&&(this.new_classes.push(create_new_tclass(this.old_classes,s,this.target_index)),count++)}for(nameOfClasses="",i=0,n=this.new_classes.length;i<n;i++)nameOfClasses+=" "+this.new_classes[i];nameOfClasses=nameOfClasses.trim(),elementClasses=null==e.getAttribute("class")?"":e.getAttribute("class"),nameOfClasses+=" "+elementClasses,nameOfClasses=nameOfClasses.trim(),e.setAttribute("class",nameOfClasses)}function searchForStyle(e,t){for(doc_styles=document.getElementsByTagName("style"),target_class="."+e,target_index=[],target_style_index=[],i=0,n=doc_styles.length;i<n;i++)for(x=doc_styles[i].innerHTML.search(target_class),tarcker=0;-1!=x;)target_style_index.push(i),target_index.push(tarcker+x),tarcker+=x+1,x=doc_styles[i].innerHTML.substring(tarcker).search(target_class);if(0==target_index.length)return"";for(class_style="",i=0,n=target_index.length;i<n;i++)str="",x=doc_styles[target_style_index[i]].innerHTML.substring(target_index[i]).split("{")[0].search(","),-1!=x?(s=doc_styles[target_style_index[i]].innerHTML.substring(target_index[i],target_index[i]+x),str+=s.split(this.target_class)[1]):(s=doc_styles[target_style_index[i]].innerHTML.substring(target_index[i]).split("{")[0],str+=s.split(this.target_class)[1]),tmp_style=doc_styles[target_style_index[i]].innerHTML.substring(target_index[i]),class_style+="."+(t+" "+str).trim()+"{"+tmp_style.split("{")[1].split("}")[0].trim()+"}";return class_style}function class_from_tclass(e,t){this.oldName=e,this.newName=t}function create_new_tclass(e,t,s){for(this.nameOfClass="",i=0,n=e.length;i<n;i++)this.nameOfClass+="_"+e[i]+"_";for(i=0,n=TClass_classes.length;i<n;i++)if(-1!=TClass_classes[i].oldName.search(this.nameOfClass))return TClass_classes[i].newName;for(this.newName="ResponsoTclass_"+TClass_classes.length,j=0,k=e.length;j<k;j++)style=searchForStyle(e[j],this.newName),t[s[j]].invokeStyle(style);return TClass_classes.push(new class_from_tclass(this.nameOfClass,this.newName)),this.newName}function runX(){for(target_setup||(targets=createTargets()),elemsWithD=iterateElementsWithDimension(),elemsWithR=iterateElementsWithRClass(),elemsWithId=iterateElementsWithRId(),elemsWithGet=iterateElementsWithRget(),i=0,k=elemsWithD.length;i<k;i++)d=elemsWithD[i].getAttribute("d"),dim=new Dimension(d),classes=null==elemsWithD[i].getAttribute("class")?"":elemsWithD[i].getAttribute("class"),newClasses=dim.invokeStyle(targets[0],targets[1],targets[2])+" "+classes,elemsWithD[i].setAttribute("class",newClasses);for(i=0,n=elemsWithD.length;i<n;i++)elemsWithD[i].removeAttribute("d");for(q=0,r=elemsWithR.length;q<r;q++)TClass_Builder(elemsWithR[q],elemsWithR[q].getAttribute("r-class"),targets);for(i=0,n=elemsWithR.length;i<n;i++)elemsWithR[i].removeAttribute("r-class");for(i=0,u=elemsWithId.length;i<u;i++)setResponsoId(elemsWithId[i],elemsWithId[i].getAttribute("r-id"));for(i=0,n=elemsWithId.length;i<n;i++)elemsWithId[i].removeAttribute("r-id");for(w=0,v=elemsWithGet.length;w<v;w++)getResponsoId(elemsWithGet[w],elemsWithGet[w].getAttribute("r-get"));for(i=0,n=elemsWithGet.length;i<n;i++)elemsWithGet[i].removeAttribute("r-get")}function iterateElementsWithDimension(){for(elemsWithD=[],elems=document.getElementsByTagName("*"),i=0,n=elems.length;i<n;i++)null!=elems[i].getAttribute("d")&&elemsWithD.push(elems[i]);return elemsWithD}function iterateElementsWithRClass(){for(elemsWithR=[],elems=document.getElementsByTagName("*"),i=0,n=elems.length;i<n;i++)null!=elems[i].getAttribute("r-class")&&elemsWithR.push(elems[i]);return elemsWithR}function iterateElementsWithRId(){for(elemsWithID=[],elems=document.getElementsByTagName("*"),i=0,n=elems.length;i<n;i++)null!=elems[i].getAttribute("r-id")&&elemsWithID.push(elems[i]);return elemsWithID}function iterateElementsWithRget(){for(elemsWithGet=[],elems=document.getElementsByTagName("*"),i=0,n=elems.length;i<n;i++)null!=elems[i].getAttribute("r-get")&&elemsWithGet.push(elems[i]);return elemsWithGet}function createTargets(){return targets=[],desktop=new Target("desktop",Desktop_Min_Width,"min"),targets.push(desktop),tablet=new Target("tablet",Tablet_Max_Width,"max"),targets.push(tablet),mobile=new Target("mobile",Mobile_Max_Width,"max"),targets.push(mobile),target_setup=!0,targets}var D_Storge=[];responso_id=[],TClass_classes=[];var Desktop_Min_Width=750,Tablet_Max_Width=750,Mobile_Max_Width=450;window.onload=runX,window.setInterval(function(){runX()},10),target_setup=!1;